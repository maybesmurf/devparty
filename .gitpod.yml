image: gitpod/workspace-postgres

tasks:
  - name: Setup
    init: >
      yarn install;
      cp .env.example .env;
    command: >
      yarn migrate:dev;
      gp sync-done setup;
      yarn codegen:graphql --watch;
  - name: Dev Server
    init: gp sync-await setup
    command: yarn dev

ports:
  - port: 3000
    onOpen: open-preview
